00008 Jun08'22-01:49:44-1654667384719 ALLOXENTRIC 12.1
TOPIC: ~control 0x1b 197171534 1 0 869 control.top
" all " 0bu u: ( ) ^if 00v( %input < %userfirstline ) 00b{ } 004 ^if 00w( %input == %userfirstline ) 01v{ ^respond ( ~datos ) ^nofail ( TOPIC ^respond ( ~intro ) ) ^nofail ( TOPIC ^gambit ( ~intro ) ) } 004 ^nofail ( TOPIC ^rejoinder ( ) ) ^if 00A( %response == 0 and ! $$boton ) 051{ @8 = ^query ( direct_sv topickeyword member ? ) $$respuesta = %response ^loop ( -1 ) 01Q { $$topic = ^first ( @8object ) ^nofail ( TOPIC ^respond ( $$topic ) ) ^if 00l( %response > 0 ) 00p{ ^end ( RULE ) } 004 } ^if 00v( %response > $$respuesta ) 01H{ $$respuesta_topic = True ^if 00q( ! %outputrejoinder ) 00Q{ ^setrejoinder ( OUTPUT ~help.continuar ) } 004 } 004 } 004 ^if 00p( $$respuesta_topic ) 00q{ ^end ( TOPIC ) } 004 ^nofail ( TOPIC ^gambit ( $estado ) ) ^nofail ( TOPIC ^respond ( $estado ) ) ^if 00m( %response == 0 ) 00M{ ^nofail ( TOPIC ^respond ( ~nose ) ) } 004 `000 
TOPIC: ~datos 0x3 160777226 10 0 618 datos.top
" all " 014 u: ( =7%hour>=12 ) $buendia = una_buena_tarde $buenosdias = Buenas_Tardes `00+ u: ( =7%hour<12 ) $buendia = un_buen_día $buenosdias = Buenos_Dias `00# u: ( \[ _*1 \] ) $data = ^jsonparse ( transient NOFAIL _0 ) `00P u: ( ) $nombre = $data.datos_contacto.CLIENTE `00S u: ( ) $telefono = $data.datos_contacto.TELEFONO `00Q u: ( ) $empresa = $data.datos_contacto.EMPRESA `00S u: ( ) $producto = $data.datos_contacto.PRODUCTO `00Q u: ( ) $tel = $data.datos_contacto.telcontacto `00N u: ( ) $rut = $data.datos_contacto.numident `010 u: ( ) $anexo = ^join ( "#" $transfer "|" $rut "|" $remesa "|" $tel ) `000 
TOPIC: ~adios 0x3 59426770 2 0 82 despedida.top
" all " 00N u: 7ADIOS ( ) Tenga $buendia $estado = null `00j u: 7ADIOS ( ) `000 
TOPIC: ~intro 0x3 112972747 3 1 238 intro.top
" all " 014 u: ( =7%hour>=12 ) $buendia = una_buena_tarde $buenosdias = Buenas_Tardes `00+ u: ( =7%hour<12 ) $buendia = un_buen_día $buenosdias = Buenos_Dias `00- t: 7INTRO ( ) $sp = null $ps = null $buenosdias $estado = ~ustedes `000 
TOPIC: ~ustedes 0x3 153552260 3 1 2277 usted_es.top
" all " 031 t: ( !$sp ) $sp = 0 $int = 0 $repet = 0 $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = None $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] Te estamos contactando de $empresa `036 u: ( $int ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = None $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] Me comunico en este numero con $cliente Por favor responda Sí o No `03I a: :CONFIRMA ( [ ~sic si sí sip sipi sisi claro por_supuesto sin_duda ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = CONFIRMA $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] $sp = null $estado = ~ofrecer_producto `03L a: =NO_CONFIRMA ( [ ~noc no nop nono ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = NO_CONFIRMA $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = FINALIZAR_CONVERSACION [ ^jsonwrite ( $x ) ] $sp = null Disculpe las molestias, ^respond ( ~adios ) `03K a: EMENSAJE_DESCONOCIDO ( ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = MENSAJE_DESCONOCIDO $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] $estado = ~ustedes $repet += 1 ^if 00j( $repet == 2 ) 00n{ $int = null } 004 `03q u: ( !$int ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = None $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] Disculpe, si usted es $cliente Marque uno para confirmar o de lo contrario marque cero `02^ a: :CONFIRMA ( [ ~1 ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = CONFIRMA $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] $sp = null $estado = ~ofrecer_producto `03x a: =NO_CONFIRMA ( [ ~0 ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = NO_CONFIRMA $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = FINALIZAR_CONVERSACION [ ^jsonwrite ( $x ) ] $sp = null Disculpe las molestias, ^respond ( ~adios ) `03G a: EMENSAJE_DESCONOCIDO ( ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = MENSAJE_DESCONOCIDO $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = FINALIZAR_CONVERSACION [ ^jsonwrite ( $x ) ] $sp = null Disculpe las molestias, ^respond ( ~adios ) `000 
TOPIC: ~ofrecer_producto 0x3 213698543 3 1 2355 usted_es.top
" all " 03f t: ( !$sp ) $sp = 0 $repet = 0 $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = None $x.intencionBot = CONSULTA_PRODUCTO $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] Estamos contactandonos con usted para ofrecer $producto `03a u: ( $int ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = None $x.intencionBot = CCONSULTA_PRODUCTO $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] Esta interesado en adquirir el $producto Por favor responda Sí o No `03K a: :CONFIRMA ( [ ~sic si sí sip sipi sisi claro por_supuesto sin_duda ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = CONFIRMA $x.intencionBot = CONSULTA_PRODUCTO $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] $sp = null $estado = ~deriva_ejecutivo `03N a: =NO_CONFIRMA ( [ ~noc no nop nono ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = NO_CONFIRMA $x.intencionBot = CONSULTA_PRODUCTO $x.comandoAcanal = FINALIZAR_CONVERSACION [ ^jsonwrite ( $x ) ] $sp = null Disculpe las molestias, ^respond ( ~adios ) `03Z a: EMENSAJE_DESCONOCIDO ( ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = MENSAJE_DESCONOCIDO $x.intencionBot = CONSULTA_CONFIRMACION $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] $estado = ~ofrecer_producto $repet += 1 ^if 00j( $repet == 2 ) 00n{ $int = null } 004 `03R u: ( !$int ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = None $x.intencionBot = CONSULTA_CONFIRMACION $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] Disculpe, Si está interesado en adquirir $producto Marque uno para confirmar o de lo contrario marque cero `02^ a: :CONFIRMA ( [ ~1 ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = CONFIRMA $x.intencionBot = CONSULTA_NOMBRE $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] $sp = null $estado = ~deriva_ejecutivo `03E a: =NO_CONFIRMA ( [ ~0 ] ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = NO_CONFIRMA $x.intencionBot = FINALIZAR_CONVERSACION $x.comandoAcanal = FINALIZAR_CONVERSACION [ ^jsonwrite ( $x ) ] $sp = null Disculpe las molestias, ^respond ( ~adios ) `03N a: EMENSAJE_DESCONOCIDO ( ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = MENSAJE_DESCONOCIDO $x.intencionBot = FINALIZAR_CONVERSACION $x.comandoAcanal = FINALIZAR_CONVERSACION [ ^jsonwrite ( $x ) ] $sp = null Disculpe las molestias, ^respond ( ~adios ) `000 
TOPIC: ~deriva_ejecutivo 0x3 25390655 1 1 515 usted_es.top
" all " 03Q t: ( !$sp ) $sp = 0 $repet = 0 $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = None $x.intencionBot = DERIVA_EJECUTIVO $x.comandoAcanal = None [ ^jsonwrite ( $x ) ] Perfecto, un ejecutivo tomará contacto con usted a la brevedad. Muchas gracias por su tiempo `02= a: EMENSAJE_DESCONOCIDO ( ) $x = ^jsoncreate ( TRANSIENT object ) $x.intencionContacto = MENSAJE_DESCONOCIDO $x.intencionBot = DERIVA_EJECUTIVO $x.comandoAcanal = FINALIZAR_CONVERSACION [ ^jsonwrite ( $x ) ] $sp = null `000 
TOPIC: ~preguntas 0x3 259933677 2 0 104 preguntas_extras.top
" all " 00F u: 7ADIOS ( [ ~adios ~ok ] ) Adios. `00N u: 7ADIOS ( gracias =9%length<=3 ) De nada. `000 
